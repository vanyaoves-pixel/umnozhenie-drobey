<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–°–º–µ—à–∞–Ω–Ω—ã–µ —á–∏—Å–ª–∞ –∏ –¥—Ä–æ–±–∏</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #eef3ff;
      color: #222;
    }

    .container {
      max-width: 960px;
      margin: 0 auto;
      padding: 20px 16px 40px;
    }

    header {
      text-align: center;
      margin-bottom: 20px;
    }

    header h1 {
      margin: 0 0 8px;
      font-size: 1.8rem;
    }

    header p {
      margin: 0;
      font-size: 0.95rem;
      color: #555;
    }

    .layout {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
    }

    .card {
      background: #fff;
      border-radius: 14px;
      padding: 16px 18px;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.06);
      flex: 1 1 280px;
      min-width: 0;
    }

    .card h2 {
      margin-top: 0;
      font-size: 1.2rem;
      margin-bottom: 8px;
    }

    .card h3 {
      margin-top: 12px;
      margin-bottom: 4px;
      font-size: 1rem;
    }

    .algorithm-list {
      padding-left: 18px;
      margin: 6px 0 10px;
      font-size: 0.95rem;
    }

    .example {
      background: #f4f6ff;
      border-radius: 10px;
      padding: 8px 10px;
      font-size: 0.95rem;
      margin-top: 8px;
    }

    .toggle-btn {
      margin-top: 8px;
      padding: 6px 10px;
      font-size: 0.85rem;
      border-radius: 8px;
      border: 1px solid #ccd4ff;
      background: #f5f6ff;
      cursor: pointer;
    }

    .toggle-btn:hover {
      background: #e8ebff;
    }

    .hidden {
      display: none;
    }

    /* –î—Ä–æ–±–∏ –∏ –∑–∞–¥–∞–Ω–∏–µ */
    .task {
      font-size: 1.4rem;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      gap: 6px;
    }

    .task-label {
      font-weight: 600;
      margin-right: 4px;
    }

    .mixed {
      font-weight: 600;
    }

    .fraction {
      display: inline-block;
      text-align: center;
      vertical-align: middle;
      margin: 0 2px;
    }

    .fraction .num {
      display: block;
      border-bottom: 2px solid #000;
      padding: 0 4px 2px;
    }

    .fraction .den {
      display: block;
      padding-top: 2px;
    }

    .controls-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      margin-bottom: 10px;
      font-size: 0.9rem;
    }

    select, input[type="number"] {
      padding: 6px 8px;
      border-radius: 8px;
      border: 1px solid #ccd0e0;
      font-size: 0.95rem;
      min-width: 80px;
    }

    .btn {
      padding: 8px 14px;
      border-radius: 10px;
      border: none;
      font-size: 0.95rem;
      cursor: pointer;
      background: #4b6bff;
      color: #fff;
      font-weight: 600;
    }

    .btn.secondary {
      background: #f0f2ff;
      color: #333;
      border: 1px solid #ccd4ff;
    }

    .btn:hover {
      filter: brightness(1.05);
    }

    .answers-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      margin-bottom: 10px;
      font-size: 0.95rem;
    }

    .answers-row label {
      margin-right: 4px;
    }

    .feedback {
      min-height: 22px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .feedback.correct {
      color: #0a8a2a;
    }

    .feedback.wrong {
      color: #d32f2f;
    }

    .explanation {
      font-size: 0.96rem;
      background: #f7f7ff;
      border-radius: 10px;
      padding: 8px 10px;
      min-height: 30px;
    }

    .score {
      margin-top: 10px;
      font-size: 0.95rem;
      font-weight: 500;
    }

    .score span {
      font-weight: 700;
    }

    .tip {
      font-size: 0.85rem;
      margin-top: 8px;
      color: #555;
    }

    .answer-whole {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      margin-right: 4px;
    }

    .answer-whole.hidden {
      display: none;
    }

    @media (max-width: 640px) {
      header h1 {
        font-size: 1.4rem;
      }
      .task {
        font-size: 1.2rem;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>–°–º–µ—à–∞–Ω–Ω—ã–µ —á–∏—Å–ª–∞ –∏ –¥—Ä–æ–±–∏</h1>
      <p>5&nbsp;–∫–ª–∞—Å—Å: –ø–µ—Ä–µ–≤–æ–¥ –∏ —É–º–Ω–æ–∂–µ–Ω–∏–µ –¥—Ä–æ–±–µ–π.</p>
    </header>

    <main class="layout">
      <!-- –ë–ª–æ–∫ —Å –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º -->
      <section class="card">
        <h2 id="algoTitle">–ê–ª–≥–æ—Ä–∏—Ç–º: —Å–º–µ—à–∞–Ω–Ω–æ–µ ‚Üí –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –¥—Ä–æ–±—å</h2>
        <p id="algoDescription">
          <strong>–°–º–µ—à–∞–Ω–Ω–æ–µ —á–∏—Å–ª–æ</strong> ‚Äî —ç—Ç–æ <strong>—Ü–µ–ª–∞—è —á–∞—Å—Ç—å</strong> –∏ <strong>–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –¥—Ä–æ–±—å</strong> —Ä—è–¥–æ–º.
        </p>

        <h3>–®–∞–≥–∏ –∞–ª–≥–æ—Ä–∏—Ç–º–∞</h3>
        <ol class="algorithm-list" id="algoSteps">
          <li><strong>–ü–æ—Å–º–æ—Ç—Ä–∏</strong> –Ω–∞ —Ü–µ–ª—É—é —á–∞—Å—Ç—å –∏ –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å.</li>
          <li><strong>–£–º–Ω–æ–∂—å</strong> —Ü–µ–ª—É—é —á–∞—Å—Ç—å –Ω–∞ –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å.</li>
          <li><strong>–ü—Ä–∏–±–∞–≤—å</strong> –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É —á–∏—Å–ª–∏—Ç–µ–ª—å.</li>
          <li><strong>–û—Å—Ç–∞–≤—å</strong> –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å —Ç–∞–∫–∏–º –∂–µ.</li>
          <li><strong>–ó–∞–ø–∏—à–∏</strong> —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –≤–∏–¥–µ –¥—Ä–æ–±–∏.</li>
        </ol>

        <div class="example" id="algoExample">
          <strong>–ü—Ä–∏–º–µ—Ä.</strong><br>
          –ë—ã–ª–æ:
          <span class="mixed">
            3
            <span class="fraction">
              <span class="num">2</span>
              <span class="den">5</span>
            </span>
          </span><br>
          1) <strong>3 √ó 5 = 15</strong><br>
          2) <strong>15 + 2 = 17</strong><br>
          –ü–æ–ª—É—á–∏–ª–∏:
          <strong>
            <span class="fraction">
              <span class="num">17</span>
              <span class="den">5</span>
            </span>
          </strong>
        </div>

        <button class="toggle-btn" id="toggleHelpBtn">–°–∫—Ä—ã—Ç—å/–ø–æ–∫–∞–∑–∞—Ç—å –∫—Ä–∞—Ç–∫—É—é –ø–æ–¥—Å–∫–∞–∑–∫—É</button>

        <div id="shortHelp">
          <h3>–ö–æ—Ä–æ—Ç–∫–∞—è —Ñ–æ—Ä–º—É–ª–∞</h3>
          <p>
            <strong>
              <span class="fraction">
                <span class="num">(—Ü–µ–ª–∞—è —á–∞—Å—Ç—å √ó –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å + —á–∏—Å–ª–∏—Ç–µ–ª—å)</span>
                <span class="den">–∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å</span>
              </span>
            </strong>
          </p>
          <p class="tip">–ì–æ–≤–æ—Ä–∏–º –≤—Å–ª—É—Ö: ¬´—Ü–µ–ª—É—é —á–∞—Å—Ç—å —É–º–Ω–æ–∂–∞—é –Ω–∞ –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å, –ø—Ä–∏–±–∞–≤–ª—è—é —á–∏—Å–ª–∏—Ç–µ–ª—å¬ª.</p>
        </div>
      </section>

      <!-- –¢—Ä–µ–Ω–∞–∂—ë—Ä -->
      <section class="card">
        <h2>–¢—Ä–µ–Ω–∞–∂—ë—Ä</h2>

        <div class="controls-row">
          <label for="mode"><strong>–†–µ–∂–∏–º:</strong></label>
          <select id="mode">
            <option value="mixedToImproper">–°–º–µ—à–∞–Ω–Ω–æ–µ ‚Üí –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –¥—Ä–æ–±—å</option>
            <option value="improperToMixed">–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –¥—Ä–æ–±—å ‚Üí —Å–º–µ—à–∞–Ω–Ω–æ–µ</option>
            <option value="multiply">–£–º–Ω–æ–∂–µ–Ω–∏–µ –¥—Ä–æ–±–µ–π –∏ —Å–º–µ—à–∞–Ω–Ω—ã—Ö —á–∏—Å–µ–ª</option>
          </select>

          <label for="difficulty"><strong>–£—Ä–æ–≤–µ–Ω—å:</strong></label>
          <select id="difficulty">
            <option value="easy">–õ—ë–≥–∫–∏–π</option>
            <option value="medium">–°—Ä–µ–¥–Ω–∏–π</option>
            <option value="hard">–°–ª–æ–∂–Ω—ã–π</option>
          </select>

          <button class="btn secondary" id="newTaskBtn">–ù–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä</button>
        </div>

        <div class="task">
          <span class="task-label" id="taskLabel">–ü–µ—Ä–µ–≤–µ–¥–∏ –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—É—é –¥—Ä–æ–±—å:</span>
          <span id="taskContent">?</span>
        </div>

        <div class="answers-row">
          <label><strong>–û—Ç–≤–µ—Ç:</strong></label>

          <span id="answerWholeBlock" class="answer-whole hidden">
            <span>—Ü–µ–ª–∞—è —á–∞—Å—Ç—å</span>
            <input type="number" id="answerWhole" placeholder="—Ü–µ–ª–∞—è">
          </span>

          <span class="fraction">
            <span class="num">
              <input type="number" id="answerNum" placeholder="—á–∏—Å–ª–∏—Ç–µ–ª—å">
            </span>
            <span class="den">
              <input type="number" id="answerDen" placeholder="–∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å">
            </span>
          </span>
          <button class="btn" id="checkBtn">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
        </div>

        <div class="feedback" id="feedback"></div>

        <div class="explanation" id="explanation">
          –ù–∞–∂–º–∏ ¬´–ù–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä¬ª, —Ä–µ—à–∏ –∑–∞–¥–∞–Ω–∏–µ –∏ –∑–∞—Ç–µ–º ¬´–ü—Ä–æ–≤–µ—Ä–∏—Ç—å¬ª.
        </div>

        <div class="score" id="score">
          –ü—Ä–∞–≤–∏–ª—å–Ω–æ: <span id="correctCount">0</span> –∏–∑ <span id="totalCount">0</span>
        </div>

        <p class="tip" id="modeTip">
          –ü–æ–¥—Å–∫–∞–∑–∫–∞: —Å–Ω–∞—á–∞–ª–∞ –≤ —É–º–µ –ø–æ—Å—á–∏—Ç–∞–π –Ω–æ–≤—ã–π —á–∏—Å–ª–∏—Ç–µ–ª—å: ¬´—Ü–µ–ª—É—é —á–∞—Å—Ç—å —É–º–Ω–æ–∂–∞—é –Ω–∞ –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å –∏ –ø—Ä–∏–±–∞–≤–ª—è—é —á–∏—Å–ª–∏—Ç–µ–ª—å¬ª.
        </p>
      </section>
    </main>
  </div>

  <script>
    // ====== –û–±—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ ======
    let currentMode = 'mixedToImproper';

    let total = 0;
    let correct = 0;

    // –ë–∞–∑–æ–≤–∞—è –ø–∞—Ä–∞ –¥–ª—è —Ä–µ–∂–∏–º–æ–≤ –ø–µ—Ä–µ–≤–æ–¥–∞ (–æ–¥–Ω–∞ –∏ —Ç–∞ –∂–µ –¥–ª—è "—Ç—É–¥–∞" –∏ "–æ–±—Ä–∞—Ç–Ω–æ")
    let baseWhole = null;
    let baseNum = null;
    let baseDen = null;
    let baseImproperNum = null;

    // –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —É–º–Ω–æ–∂–µ–Ω–∏—è
    let mulType = null; // 'ff', 'mf', 'mm'
    let aIsMixed = false, bIsMixed = false;
    let aWhole = 0, aNum = 0, aDen = 1;
    let bWhole = 0, bNum = 0, bDen = 1;
    let aNumImp = 0, aDenImp = 1, bNumImp = 0, bDenImp = 1;
    let mulResultNum = 0, mulResultDen = 1;

    // ====== DOM-—ç–ª–µ–º–µ–Ω—Ç—ã ======
    const algoTitleEl = document.getElementById('algoTitle');
    const algoDescriptionEl = document.getElementById('algoDescription');
    const algoStepsEl = document.getElementById('algoSteps');
    const algoExampleEl = document.getElementById('algoExample');
    const shortHelpEl = document.getElementById('shortHelp');
    const toggleHelpBtn = document.getElementById('toggleHelpBtn');

    const modeEl = document.getElementById('mode');
    const difficultyEl = document.getElementById('difficulty');
    const newTaskBtn = document.getElementById('newTaskBtn');
    const checkBtn = document.getElementById('checkBtn');

    const taskLabelEl = document.getElementById('taskLabel');
    const taskContentEl = document.getElementById('taskContent');

    const answerWholeBlockEl = document.getElementById('answerWholeBlock');
    const answerWholeEl = document.getElementById('answerWhole');
    const answerNumEl = document.getElementById('answerNum');
    const answerDenEl = document.getElementById('answerDen');

    const feedbackEl = document.getElementById('feedback');
    const explanationEl = document.getElementById('explanation');
    const correctCountEl = document.getElementById('correctCount');
    const totalCountEl = document.getElementById('totalCount');
    const modeTipEl = document.getElementById('modeTip');

    // ====== –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –¥—Ä–æ–±–µ–π ======
    function fractionHTML(num, den) {
      return (
        '<span class="fraction">' +
          '<span class="num">' + num + '</span>' +
          '<span class="den">' + den + '</span>' +
        '</span>'
      );
    }

    function mixedHTML(whole, num, den) {
      return (
        '<span class="mixed">' +
          whole + ' ' +
          fractionHTML(num, den) +
        '</span>'
      );
    }

    // –°–ª—É—á–∞–π–Ω–æ–µ —Ü–µ–ª–æ–µ [min, max]
    function getRandomInt(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    // ====== –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –ø–æ–¥ —Ä–µ–∂–∏–º ======
    function updateAlgorithmCard() {
      if (currentMode === 'mixedToImproper') {
        algoTitleEl.textContent = '–ê–ª–≥–æ—Ä–∏—Ç–º: —Å–º–µ—à–∞–Ω–Ω–æ–µ ‚Üí –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –¥—Ä–æ–±—å';
        algoDescriptionEl.innerHTML = '<strong>–°–º–µ—à–∞–Ω–Ω–æ–µ —á–∏—Å–ª–æ</strong> ‚Äî —ç—Ç–æ <strong>—Ü–µ–ª–∞—è —á–∞—Å—Ç—å</strong> –∏ <strong>–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –¥—Ä–æ–±—å</strong> —Ä—è–¥–æ–º.';

        algoStepsEl.innerHTML = `
          <li><strong>–ü–æ—Å–º–æ—Ç—Ä–∏</strong> –Ω–∞ —Ü–µ–ª—É—é —á–∞—Å—Ç—å –∏ –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å.</li>
          <li><strong>–£–º–Ω–æ–∂—å</strong> —Ü–µ–ª—É—é —á–∞—Å—Ç—å –Ω–∞ –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å.</li>
          <li><strong>–ü—Ä–∏–±–∞–≤—å</strong> –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É —á–∏—Å–ª–∏—Ç–µ–ª—å.</li>
          <li><strong>–û—Å—Ç–∞–≤—å</strong> –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å —Ç–∞–∫–∏–º –∂–µ.</li>
          <li><strong>–ó–∞–ø–∏—à–∏</strong> —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –≤–∏–¥–µ –¥—Ä–æ–±–∏.</li>
        `;

        algoExampleEl.innerHTML = `
          <strong>–ü—Ä–∏–º–µ—Ä.</strong><br>
          –ë—ã–ª–æ: ${mixedHTML(3, 2, 5)}<br>
          1) <strong>3 √ó 5 = 15</strong><br>
          2) <strong>15 + 2 = 17</strong><br>
          –ü–æ–ª—É—á–∏–ª–∏: <strong>${fractionHTML(17, 5)}</strong>
        `;

        shortHelpEl.innerHTML = `
          <h3>–ö–æ—Ä–æ—Ç–∫–∞—è —Ñ–æ—Ä–º—É–ª–∞</h3>
          <p>
            <strong>
              <span class="fraction">
                <span class="num">(—Ü–µ–ª–∞—è —á–∞—Å—Ç—å √ó –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å + —á–∏—Å–ª–∏—Ç–µ–ª—å)</span>
                <span class="den">–∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å</span>
              </span>
            </strong>
          </p>
          <p class="tip">–ì–æ–≤–æ—Ä–∏–º –≤—Å–ª—É—Ö: ¬´—Ü–µ–ª—É—é —á–∞—Å—Ç—å —É–º–Ω–æ–∂–∞—é –Ω–∞ –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å, –ø—Ä–∏–±–∞–≤–ª—è—é —á–∏—Å–ª–∏—Ç–µ–ª—å¬ª.</p>
        `;

        modeTipEl.textContent =
          '–ü–æ–¥—Å–∫–∞–∑–∫–∞: —Å–Ω–∞—á–∞–ª–∞ –≤ —É–º–µ –ø–æ—Å—á–∏—Ç–∞–π –Ω–æ–≤—ã–π —á–∏—Å–ª–∏—Ç–µ–ª—å, –∞ –ø–æ—Ç–æ–º –∑–∞–ø–∏—Å—ã–≤–∞–π –¥—Ä–æ–±—å.';
      } else if (currentMode === 'improperToMixed') {
        algoTitleEl.textContent = '–ê–ª–≥–æ—Ä–∏—Ç–º: –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –¥—Ä–æ–±—å ‚Üí —Å–º–µ—à–∞–Ω–Ω–æ–µ —á–∏—Å–ª–æ';
        algoDescriptionEl.innerHTML =
          '<strong>–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –¥—Ä–æ–±—å</strong> ‚Äî —á–∏—Å–ª–∏—Ç–µ–ª—å –±–æ–ª—å—à–µ –∏–ª–∏ —Ä–∞–≤–µ–Ω –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—é. –ù—É–∂–Ω–æ –≤—ã–¥–µ–ª–∏—Ç—å —Ü–µ–ª—É—é —á–∞—Å—Ç—å.';

        algoStepsEl.innerHTML = `
          <li><strong>–†–∞–∑–¥–µ–ª–∏</strong> —á–∏—Å–ª–∏—Ç–µ–ª—å –Ω–∞ –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å.</li>
          <li><strong>–°–∫–æ–ª—å–∫–æ —Ü–µ–ª—ã—Ö</strong> –ø–æ–ª—É—á–∏–ª–æ—Å—å ‚Äî —ç—Ç–æ —Ü–µ–ª–∞—è —á–∞—Å—Ç—å.</li>
          <li><strong>–û—Å—Ç–∞—Ç–æ–∫</strong> –æ—Ç –¥–µ–ª–µ–Ω–∏—è ‚Äî –Ω–æ–≤—ã–π —á–∏—Å–ª–∏—Ç–µ–ª—å.</li>
          <li><strong>–ó–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å</strong> –æ—Å—Ç–∞—ë—Ç—Å—è —Ç–µ–º –∂–µ.</li>
          <li><strong>–ó–∞–ø–∏—à–∏</strong> –æ—Ç–≤–µ—Ç: —Ü–µ–ª–∞—è —á–∞—Å—Ç—å –∏ –¥—Ä–æ–±—å.</li>
        `;

        algoExampleEl.innerHTML = `
          <strong>–ü—Ä–∏–º–µ—Ä.</strong><br>
          –ë—ã–ª–æ: ${fractionHTML(17, 5)}<br>
          1) 17 √∑ 5 = 3 (–æ—Å—Ç–∞—Ç–æ–∫ 2)<br>
          –ü–æ–ª—É—á–∏–ª–∏: <strong>${mixedHTML(3, 2, 5)}</strong>
        `;

        shortHelpEl.innerHTML = `
          <h3>–ö–æ—Ä–æ—Ç–∫–∞—è –ø–æ–¥—Å–∫–∞–∑–∫–∞</h3>
          <p>–î–µ–ª–∏–º ¬´—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å –ø–æ–º–µ—Å—Ç–∏—Ç—Å—è –≤ —á–∏—Å–ª–∏—Ç–µ–ª–µ¬ª.</p>
          <p class="tip">–ß–∏—Å–ª–∏—Ç–µ–ª—å = –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å √ó —Ü–µ–ª–∞—è —á–∞—Å—Ç—å + –æ—Å—Ç–∞—Ç–æ–∫.</p>
        `;

        modeTipEl.textContent =
          '–ü–æ–¥—Å–∫–∞–∑–∫–∞: —Å–Ω–∞—á–∞–ª–∞ —Ä–∞–∑–¥–µ–ª–∏ —á–∏—Å–ª–∏—Ç–µ–ª—å –Ω–∞ –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å, –∑–∞–ø–∏—à–∏ —Ü–µ–ª—É—é —á–∞—Å—Ç—å –∏ –æ—Å—Ç–∞—Ç–æ–∫.';
      } else if (currentMode === 'multiply') {
        algoTitleEl.textContent = '–ê–ª–≥–æ—Ä–∏—Ç–º: —É–º–Ω–æ–∂–µ–Ω–∏–µ –¥—Ä–æ–±–µ–π –∏ —Å–º–µ—à–∞–Ω–Ω—ã—Ö —á–∏—Å–µ–ª';
        algoDescriptionEl.innerHTML =
          '–ü—Ä–∏ —É–º–Ω–æ–∂–µ–Ω–∏–∏ —Å–º–µ—à–∞–Ω–Ω—ã—Ö —á–∏—Å–µ–ª —Å–Ω–∞—á–∞–ª–∞ –ø–µ—Ä–µ–≤–æ–¥–∏–º –∏—Ö –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥—Ä–æ–±–∏, –ø–æ—Ç–æ–º –ø–µ—Ä–µ–º–Ω–æ–∂–∞–µ–º –¥—Ä–æ–±–∏.';

        algoStepsEl.innerHTML = `
          <li><strong>–ï—Å–ª–∏ –µ—Å—Ç—å —Å–º–µ—à–∞–Ω–Ω—ã–µ —á–∏—Å–ª–∞</strong> ‚Äî –ø–µ—Ä–µ–≤–µ–¥–∏ –∏—Ö –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥—Ä–æ–±–∏.</li>
          <li><strong>–ü–µ—Ä–µ–º–Ω–æ–∂—å</strong> —á–∏—Å–ª–∏—Ç–µ–ª–∏.</li>
          <li><strong>–ü–µ—Ä–µ–º–Ω–æ–∂—å</strong> –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª–∏.</li>
          <li><strong>–ü—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏ —Å–æ–∫—Ä–∞—Ç–∏</strong> –¥—Ä–æ–±—å (–µ—Å–ª–∏ –∑–Ω–∞–µ—Ç–µ —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ).</li>
          <li><strong>–û—Ç–≤–µ—Ç</strong> –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –¥—Ä–æ–±—å—é –∏–ª–∏ –≤—ã–¥–µ–ª–∏—Ç—å —Ü–µ–ª—É—é —á–∞—Å—Ç—å.</li>
        `;

        algoExampleEl.innerHTML = `
          <strong>–ü—Ä–∏–º–µ—Ä.</strong><br>
          ${mixedHTML(1, 1, 2)} √ó ${fractionHTML(3, 4)} = ${fractionHTML(3, 2)} √ó ${fractionHTML(3, 4)}
          = ${fractionHTML(9, 8)}
        `;

        shortHelpEl.innerHTML = `
          <h3>–ö–æ—Ä–æ—Ç–∫–∞—è –ø–æ–¥—Å–∫–∞–∑–∫–∞</h3>
          <p>–°–º–µ—à–∞–Ω–Ω—ã–µ —á–∏—Å–ª–∞ ‚Üí –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥—Ä–æ–±–∏, –ø–æ—Ç–æ–º: —á–∏—Å–ª–∏—Ç–µ–ª—å √ó —á–∏—Å–ª–∏—Ç–µ–ª—å, –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å √ó –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å.</p>
          <p class="tip">–ú–æ–∂–Ω–æ –ø–æ—Ç–æ–º —Å–æ–∫—Ä–∞—Ç–∏—Ç—å –¥—Ä–æ–±—å –∏–ª–∏ –≤—ã–¥–µ–ª–∏—Ç—å —Ü–µ–ª—É—é —á–∞—Å—Ç—å.</p>
        `;

        modeTipEl.textContent =
          '–ü–æ–¥—Å–∫–∞–∑–∫–∞: –ø–µ—Ä–µ–≤–µ–¥–∏ —Å–º–µ—à–∞–Ω–Ω—ã–µ —á–∏—Å–ª–∞ –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥—Ä–æ–±–∏, –∑–∞—Ç–µ–º –ø–µ—Ä–µ–º–Ω–æ–∂—å —á–∏—Å–ª–∏—Ç–µ–ª–∏ –∏ –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª–∏.';
      }
    }

    // ====== –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á ======
    function generateMixedBase() {
      const diff = difficultyEl.value;

      let maxWhole, maxDen;
      if (diff === 'easy') {
        maxWhole = 5;
        maxDen = 9;
      } else if (diff === 'medium') {
        maxWhole = 9;
        maxDen = 12;
      } else {
        maxWhole = 12;
        maxDen = 12;
      }

      baseDen = getRandomInt(2, maxDen);
      baseWhole = getRandomInt(1, maxWhole);
      baseNum = getRandomInt(1, baseDen - 1);
      baseImproperNum = baseWhole * baseDen + baseNum;
    }

    function generateMixedTask() {
      generateMixedBase();

      if (currentMode === 'mixedToImproper') {
        taskLabelEl.textContent = '–ü–µ—Ä–µ–≤–µ–¥–∏ –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—É—é –¥—Ä–æ–±—å:';
        taskContentEl.innerHTML = mixedHTML(baseWhole, baseNum, baseDen);
        answerWholeBlockEl.classList.add('hidden');
        answerWholeEl.value = '';
        explanationEl.textContent =
          '–ü—Ä–∏–º–µ–Ω—è–π –∞–ª–≥–æ—Ä–∏—Ç–º: —Ü–µ–ª—É—é —á–∞—Å—Ç—å —É–º–Ω–æ–∂—å –Ω–∞ –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å –∏ –ø—Ä–∏–±–∞–≤—å —á–∏—Å–ª–∏—Ç–µ–ª—å.';
      } else {
        taskLabelEl.textContent = '–í—ã–¥–µ–ª–∏ —Ü–µ–ª—É—é —á–∞—Å—Ç—å:';
        taskContentEl.innerHTML = fractionHTML(baseImproperNum, baseDen);
        answerWholeBlockEl.classList.remove('hidden');
        explanationEl.textContent =
          '–†–∞–∑–¥–µ–ª–∏ —á–∏—Å–ª–∏—Ç–µ–ª—å –Ω–∞ –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å: —Å–∫–æ–ª—å–∫–æ —Ü–µ–ª—ã—Ö ‚Äî —Ü–µ–ª–∞—è —á–∞—Å—Ç—å, –æ—Å—Ç–∞—Ç–æ–∫ ‚Äî –Ω–æ–≤—ã–π —á–∏—Å–ª–∏—Ç–µ–ª—å.';
      }

      // –û—á–∏—Å—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ –∏ —Å–æ–æ–±—â–µ–Ω–∏–π
      answerNumEl.value = '';
      answerDenEl.value = '';
      feedbackEl.textContent = '';
      feedbackEl.classList.remove('correct', 'wrong');
    }

    function randomFractionByDifficulty() {
      const diff = difficultyEl.value;
      let maxDen;
      if (diff === 'easy') maxDen = 9;
      else maxDen = 12;

      const den = getRandomInt(2, maxDen);
      const num = getRandomInt(1, den - 1);
      return { num, den };
    }

    function randomMixedByDifficulty() {
      const diff = difficultyEl.value;
      let maxWhole, maxDen;
      if (diff === 'easy') {
        maxWhole = 5;
        maxDen = 9;
      } else if (diff === 'medium') {
        maxWhole = 8;
        maxDen = 12;
      } else {
        maxWhole = 12;
        maxDen = 12;
      }

      const den = getRandomInt(2, maxDen);
      const whole = getRandomInt(1, maxWhole);
      const num = getRandomInt(1, den - 1);
      return { whole, num, den };
    }

    function generateMultiplyTask() {
      taskLabelEl.textContent = '–ü–µ—Ä–µ–º–Ω–æ–∂—å –∏ –∑–∞–ø–∏—à–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥—Ä–æ–±—å—é:';
      answerWholeBlockEl.classList.add('hidden');

      // –í—ã–±–æ—Ä —Ç–∏–ø–∞: –¥—Ä–æ–±—å√ó–¥—Ä–æ–±—å, —Å–º–µ—à–∞–Ω–Ω–æ–µ√ó–¥—Ä–æ–±—å, —Å–º–µ—à–∞–Ω–Ω–æ–µ√ó—Å–º–µ—à–∞–Ω–Ω–æ–µ
      const typeIndex = getRandomInt(0, 2);
      mulType = ['ff', 'mf', 'mm'][typeIndex];

      if (mulType === 'ff') {
        const f1 = randomFractionByDifficulty();
        const f2 = randomFractionByDifficulty();

        aIsMixed = false;
        bIsMixed = false;
        aWhole = 0;
        bWhole = 0;
        aNum = f1.num;
        aDen = f1.den;
        bNum = f2.num;
        bDen = f2.den;
      } else if (mulType === 'mf') {
        const mix = randomMixedByDifficulty();
        const frac = randomFractionByDifficulty();

        // –°–ª—É—á–∞–π–Ω–æ —Ä–µ—à–∞–µ–º, –∫—Ç–æ –±—É–¥–µ—Ç –ø–µ—Ä–≤—ã–º
        if (getRandomInt(0, 1) === 0) {
          aIsMixed = true;
          bIsMixed = false;
          aWhole = mix.whole;
          aNum = mix.num;
          aDen = mix.den;
          bWhole = 0;
          bNum = frac.num;
          bDen = frac.den;
        } else {
          aIsMixed = false;
          bIsMixed = true;
          aWhole = 0;
          aNum = frac.num;
          aDen = frac.den;
          bWhole = mix.whole;
          bNum = mix.num;
          bDen = mix.den;
        }
      } else { // mm
        const mix1 = randomMixedByDifficulty();
        const mix2 = randomMixedByDifficulty();

        aIsMixed = true;
        bIsMixed = true;
        aWhole = mix1.whole;
        aNum = mix1.num;
        aDen = mix1.den;
        bWhole = mix2.whole;
        bNum = mix2.num;
        bDen = mix2.den;
      }

      // –ü–µ—Ä–µ–≤–æ–¥ –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥—Ä–æ–±–∏
      if (aIsMixed) {
        aNumImp = aWhole * aDen + aNum;
        aDenImp = aDen;
      } else {
        aNumImp = aNum;
        aDenImp = aDen;
      }

      if (bIsMixed) {
        bNumImp = bWhole * bDen + bNum;
        bDenImp = bDen;
      } else {
        bNumImp = bNum;
        bDenImp = bDen;
      }

      mulResultNum = aNumImp * bNumImp;
      mulResultDen = aDenImp * bDenImp;

      const leftHTML = aIsMixed ? mixedHTML(aWhole, aNum, aDen) : fractionHTML(aNum, aDen);
      const rightHTML = bIsMixed ? mixedHTML(bWhole, bNum, bDen) : fractionHTML(bNum, bDen);

      taskContentEl.innerHTML = leftHTML + ' √ó ' + rightHTML;

      // –û—á–∏—Å—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ –∏ —Å–æ–æ–±—â–µ–Ω–∏–π
      answerWholeEl.value = '';
      answerNumEl.value = '';
      answerDenEl.value = '';
      feedbackEl.textContent = '';
      feedbackEl.classList.remove('correct', 'wrong');
      explanationEl.textContent =
        '–ï—Å–ª–∏ –µ—Å—Ç—å —Å–º–µ—à–∞–Ω–Ω—ã–µ —á–∏—Å–ª–∞, –ø–µ—Ä–µ–≤–µ–¥–∏ –∏—Ö –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥—Ä–æ–±–∏, –∑–∞—Ç–µ–º –ø–µ—Ä–µ–º–Ω–æ–∂—å —á–∏—Å–ª–∏—Ç–µ–ª–∏ –∏ –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª–∏.';
    }

    function generateTask() {
      if (currentMode === 'mixedToImproper' || currentMode === 'improperToMixed') {
        generateMixedTask();
      } else {
        generateMultiplyTask();
      }
    }

    // ====== –û–±—ä—è—Å–Ω–µ–Ω–∏—è ======
    function buildMixedToImproperExplanationHTML() {
      const step1 = baseWhole + ' √ó ' + baseDen + ' + ' + baseNum;
      const step2 = (baseWhole * baseDen) + ' + ' + baseNum;

      const mixed = mixedHTML(baseWhole, baseNum, baseDen);
      const frac1 =
        '<span class="fraction"><span class="num">(' + step1 +
        ')</span><span class="den">' + baseDen + '</span></span>';
      const frac2 =
        '<span class="fraction"><span class="num">(' + step2 +
        ')</span><span class="den">' + baseDen + '</span></span>';
      const result = fractionHTML(baseImproperNum, baseDen);

      return mixed + ' = ' + frac1 + ' = ' + frac2 + ' = ' + result;
    }

    function buildImproperToMixedExplanationHTML() {
      const improper = fractionHTML(baseImproperNum, baseDen);
      const mixed = mixedHTML(baseWhole, baseNum, baseDen);
      const text = baseImproperNum + ' √∑ ' + baseDen + ' = ' +
        baseWhole + ' (–æ—Å—Ç–∞—Ç–æ–∫ ' + baseNum + ')';

      return improper + ' = ' + mixed + '<br>' + text;
    }

    function buildMultiplicationExplanationHTML() {
      let html = '';

      if (aIsMixed || bIsMixed) {
        html += '–°–Ω–∞—á–∞–ª–∞ –ø–µ—Ä–µ–≤–æ–¥–∏–º —Å–º–µ—à–∞–Ω–Ω—ã–µ —á–∏—Å–ª–∞ –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥—Ä–æ–±–∏:<br>';

        if (aIsMixed) {
          html += mixedHTML(aWhole, aNum, aDen) + ' = ' +
                  fractionHTML(aNumImp, aDenImp) + '<br>';
        } else {
          html += fractionHTML(aNum, aDen) + ' ‚Äî —É–∂–µ –¥—Ä–æ–±—å.<br>';
        }

        if (bIsMixed) {
          html += mixedHTML(bWhole, bNum, bDen) + ' = ' +
                  fractionHTML(bNumImp, bDenImp) + '<br>';
        } else {
          html += fractionHTML(bNum, bDen) + ' ‚Äî —É–∂–µ –¥—Ä–æ–±—å.<br>';
        }

        html += '<br>';
      }

      html += '–ü–µ—Ä–µ–º–Ω–æ–∂–∞–µ–º –¥—Ä–æ–±–∏:<br>';
      html += fractionHTML(aNumImp, aDenImp) + ' √ó ' +
              fractionHTML(bNumImp, bDenImp) + ' = ' +
              fractionHTML(mulResultNum, mulResultDen);

      return html;
    }

    // ====== –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ ======
    function checkMixedToImproper() {
      if (baseDen === null) {
        feedbackEl.textContent = '–°–Ω–∞—á–∞–ª–∞ –Ω–∞–∂–º–∏ ¬´–ù–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä¬ª.';
        feedbackEl.classList.remove('correct');
        feedbackEl.classList.add('wrong');
        return;
      }

      const userNum = parseInt(answerNumEl.value, 10);
      const userDen = parseInt(answerDenEl.value, 10);

      if (isNaN(userNum) || isNaN(userDen)) {
        feedbackEl.textContent = '–ó–∞–ø–æ–ª–Ω–∏ –æ–±–∞ –ø–æ–ª—è: —á–∏—Å–ª–∏—Ç–µ–ª—å –∏ –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å.';
        feedbackEl.classList.remove('correct');
        feedbackEl.classList.add('wrong');
        return;
      }

      total++;
      totalCountEl.textContent = total.toString();

      explanationEl.innerHTML = buildMixedToImproperExplanationHTML();

      if (userNum === baseImproperNum && userDen === baseDen) {
        correct++;
        correctCountEl.textContent = correct.toString();
        feedbackEl.textContent = '–í–µ—Ä–Ω–æ! –ú–æ–ª–æ–¥–µ—Ü üëç';
        feedbackEl.classList.remove('wrong');
        feedbackEl.classList.add('correct');
        generateTask();
      } else {
        feedbackEl.textContent = '–ü–æ–∫–∞ –Ω–µ—Ç. –ü–æ—Å–º–æ—Ç—Ä–∏ –Ω–∞ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –∏ –ø–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑ –∏–ª–∏ –≤–æ–∑—å–º–∏ –Ω–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä.';
        feedbackEl.classList.remove('correct');
        feedbackEl.classList.add('wrong');
      }
    }

    function checkImproperToMixed() {
      if (baseDen === null) {
        feedbackEl.textContent = '–°–Ω–∞—á–∞–ª–∞ –Ω–∞–∂–º–∏ ¬´–ù–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä¬ª.';
        feedbackEl.classList.remove('correct');
        feedbackEl.classList.add('wrong');
        return;
      }

      const userWhole = parseInt(answerWholeEl.value, 10);
      const userNum = parseInt(answerNumEl.value, 10);
      const userDen = parseInt(answerDenEl.value, 10);

      if (isNaN(userWhole) || isNaN(userNum) || isNaN(userDen)) {
        feedbackEl.textContent = '–ó–∞–ø–æ–ª–Ω–∏ —Ü–µ–ª—É—é —á–∞—Å—Ç—å, —á–∏—Å–ª–∏—Ç–µ–ª—å –∏ –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å.';
        feedbackEl.classList.remove('correct');
        feedbackEl.classList.add('wrong');
        return;
      }

      total++;
      totalCountEl.textContent = total.toString();

      explanationEl.innerHTML = buildImproperToMixedExplanationHTML();

      if (userWhole === baseWhole && userNum === baseNum && userDen === baseDen) {
        correct++;
        correctCountEl.textContent = correct.toString();
        feedbackEl.textContent = '–í–µ—Ä–Ω–æ! –ú–æ–ª–æ–¥–µ—Ü üëç';
        feedbackEl.classList.remove('wrong');
        feedbackEl.classList.add('correct');
        generateTask();
      } else {
        feedbackEl.textContent =
          '–ü–æ–∫–∞ –Ω–µ—Ç. –ü—Ä–æ–≤–µ—Ä—å –¥–µ–ª–µ–Ω–∏–µ: —Ü–µ–ª–∞—è —á–∞—Å—Ç—å –∏ –æ—Å—Ç–∞—Ç–æ–∫ –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞—Å—Ç—å.';
        feedbackEl.classList.remove('correct');
        feedbackEl.classList.add('wrong');
      }
    }

    function checkMultiply() {
      if (mulResultDen === 0) {
        feedbackEl.textContent = '–°–Ω–∞—á–∞–ª–∞ –Ω–∞–∂–º–∏ ¬´–ù–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä¬ª.';
      }

      const userNum = parseInt(answerNumEl.value, 10);
      const userDen = parseInt(answerDenEl.value, 10);

      if (isNaN(userNum) || isNaN(userDen)) {
        feedbackEl.textContent = '–ó–∞–ø–æ–ª–Ω–∏ —á–∏—Å–ª–∏—Ç–µ–ª—å –∏ –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å.';
        feedbackEl.classList.remove('correct');
        feedbackEl.classList.add('wrong');
        return;
      }

      if (userDen === 0) {
        feedbackEl.textContent = '–ó–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω—É–ª—ë–º.';
        feedbackEl.classList.remove('correct');
        feedbackEl.classList.add('wrong');
        return;
      }

      total++;
      totalCountEl.textContent = total.toString();

      explanationEl.innerHTML = buildMultiplicationExplanationHTML();

      // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ —Ä–∞–≤–µ–Ω—Å—Ç–≤—É –¥—Ä–æ–±–µ–π (–º–æ–∂–Ω–æ –Ω–µ —Å–æ–∫—Ä–∞—â–∞—Ç—å)
      if (userNum * mulResultDen === userDen * mulResultNum) {
        correct++;
        correctCountEl.textContent = correct.toString();
        feedbackEl.textContent = '–í–µ—Ä–Ω–æ! –ú–æ–ª–æ–¥–µ—Ü üëç';
        feedbackEl.classList.remove('wrong');
        feedbackEl.classList.add('correct');
        generateTask();
      } else {
        feedbackEl.textContent =
          '–ü–æ–∫–∞ –Ω–µ—Ç. –ü—Ä–æ–≤–µ—Ä—å —É–º–Ω–æ–∂–µ–Ω–∏–µ —á–∏—Å–ª–∏—Ç–µ–ª–µ–π –∏ –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª–µ–π, –ø–æ—Å–º–æ—Ç—Ä–∏ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ.';
        feedbackEl.classList.remove('correct');
        feedbackEl.classList.add('wrong');
      }
    }

    function checkAnswer() {
      if (currentMode === 'mixedToImproper') {
        checkMixedToImproper();
      } else if (currentMode === 'improperToMixed') {
        checkImproperToMixed();
      } else {
        checkMultiply();
      }
    }

    // ====== –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ ======
    function onModeChange() {
      currentMode = modeEl.value;
      updateAlgorithmCard();
      generateTask();
    }

    function toggleHelp() {
      if (shortHelpEl.classList.contains('hidden')) {
        shortHelpEl.classList.remove('hidden');
      } else {
        shortHelpEl.classList.add('hidden');
      }
    }

    // ====== –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ ======
    modeEl.addEventListener('change', onModeChange);
    difficultyEl.addEventListener('change', generateTask);
    newTaskBtn.addEventListener('click', generateTask);
    checkBtn.addEventListener('click', checkAnswer);
    toggleHelpBtn.addEventListener('click', toggleHelp);

    // –°—Ç–∞—Ä—Ç
    updateAlgorithmCard();
    generateTask();
  </script>
</body>
</html>
